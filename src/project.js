window.__require=function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!s&&r)return r(l,!0);if(c)return c(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return o(t[a][1][e]||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({"000 - 001":[function(e,t,n){"use strict";cc._RF.push(t,"1755b67dHNLZ4tOEbi1MYzz","000 - 001");e("initConfig");cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{initConfig:"initConfig"}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"6c603FmJKhJ3rJrrrn3UVLl","Config");var i={money:0,preMoney:0,level:1,bg:1,getProp:function(){return cc.log(a["level"+this.level].money),a["level"+this.level].money},isSucceed:function(){return this.money>=this.getProp()}},o={tag1:{name:"empty",money:0},tag2:{name:"gold1",money:50},tag3:{name:"gold2",money:100},tag4:{name:"gold3",money:250},tag5:{name:"gold4",money:500},tag6:{name:"stone1",money:20},tag7:{name:"stone2",money:25}},c={prop1:{tag2:[[22,154],[612,154],[663,49],[680,218],[782,30]],tag3:[[537,29],[905,157]],tag4:[[829,219]],tag5:[[70,68],[187,68],[325,45],[715,139]],tag6:[[387,141],[483,193],[527,116]],tag7:[[132,174],[273,185],[885,67]]},prop2:{tag2:[[22,154],[249,30],[316,49],[612,154],[680,218]],tag3:[[248,207],[204,119],[422,29],[905,216]],tag4:[[524,66]],tag5:[[70,75],[888,56]],tag6:[[379,114],[483,193],[711,141],[742,32],[915,149]],tag7:[[132,174],[159,49],[813,156]]},prop3:{tag2:[[22,154],[80,223],[95,94],[249,30],[296,154],[316,49],[346,104],[501,88],[546,160],[606,129],[612,206],[612,52],[660,90],[710,218],[686,22],[782,183],[865,106],[858,46],[936,104]],tag3:[[46,29],[204,119],[248,207],[401,198],[422,29],[550,47],[806,50],[905,216],[919,29]],tag6:[[389,114],[483,193],[711,141],[742,32],[915,149]],tag7:[[132,174],[159,49],[836,191]]}},a={level1:{money:500,obj:s({tag2:[[114,154],[517,231],[658,231],[572,169],[582,68],[673,46],[747,82],[817,43]],tag3:[[327,46],[870,82]],tag4:[[781,154]],tag5:[[73,63]],tag6:[[43,238],[263,154],[700,121],[907,196]],tag7:[[420,183]]})},level2:{money:700,obj:s({tag2:[[264,211],[301,129],[377,49],[397,71],[458,154],[598,127]],tag3:[[127,184],[804,26]],tag4:[[762,220]],tag6:[[217,138],[515,40],[896,214]],tag7:[[35,228],[37,66],[547,204],[681,139]]})},level3:{money:800,obj:s({tag2:[[898,154]],tag3:[[295,112]],tag4:[[174,109]],tag5:[[56,117],[819,118],[886,53]],tag6:[[913,214]],tag7:[[35,228],[129,228],[251,228],[380,221],[496,217],[621,217],[737,217],[826,217]]})},level4:{get money(){var e=0;return 900+50*++e},get obj(){return s(c["prop"+Math.floor(2*(Math.random()+1))])}}};function s(e){var t,n,i,c,a=[];for(t in e)for(i=e[t],n=0;n<i.length;n++)(c=JSON.parse(JSON.stringify(o[t]))).x=i[n][0],c.y=i[n][1],a.push(c);return a}t.exports={obj:o,level:a,player:i,fallingStone0:{tag1:[0],tag2:[-169],tag3:[119],tag4:[-374],tag5:[-9],tag6:[800],tag7:[-267],tag8:[-406,-194,394],tag9:[-406,-256,167,435],tag10:[-398,-256,-114,21,277,399]}},cc._RF.pop()},{}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"64c1fVRCo9BAqxC/hK+TMzW","Main");var i=e("uiMgr");cc.Class({extends:cc.Component,properties:{},start:function(){i.open("prefab/ui/home-panel")}}),cc._RF.pop()},{uiMgr:"uiMgr"}],Miner:[function(e,t,n){"use strict";cc._RF.push(t,"e89edCsBY9Jp6N4EMq/0JpE","Miner");var i=e("uiMgr");cc.Class({extends:cc.Component,properties:{minerState:{default:null,type:cc.SpriteFrame},maxMoveSpeed:100,accel:50,wheel0:{default:null,type:cc.Node},wheel1:{default:null,type:cc.Node}},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.node.getComponent(cc.Sprite).spriteFrame=this.minerState,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.xSpeed=0},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.left:this.accLeft=!0,this.wheel0.getComponent(cc.Animation).play("wheel-left0"),this.wheel1.getComponent(cc.Animation).play("wheel-left1");break;case cc.macro.KEY.right:this.accRight=!0,this.wheel0.getComponent(cc.Animation).play("wheel-right0"),this.wheel1.getComponent(cc.Animation).play("wheel-right1")}},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.left:this.accLeft=!1;break;case cc.macro.KEY.right:this.accRight=!1}},onCollisionEnter:function(e,t){"FallingStone"===e.node.group&&"FallingStone"==e.node.group&&(e.node.destroy(),this.gameOver())},gameOver:function(){isFailed=!0,i.close("prefab/ui/game-panel"),i.open("prefab/ui/result-panel"),cc.audioEngine.stopAll()},start:function(){},update:function(e){this.accLeft?this.xSpeed-=this.accel*e:this.accRight&&(this.xSpeed+=this.accel*e),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed));var t=this.node.x+this.xSpeed*e;Math.abs(t)+71.5>cc.winSize.width/2?(this.xSpeed=0,this.wheel0.getComponent(cc.Animation).stop("wheel-left0"),this.wheel1.getComponent(cc.Animation).stop("wheel-left1"),this.wheel0.getComponent(cc.Animation).stop("wheel-right0"),this.wheel1.getComponent(cc.Animation).stop("wheel-right1")):this.node.x=t}}),cc._RF.pop()},{uiMgr:"uiMgr"}],backgroundLoop:[function(e,t,n){"use strict";cc._RF.push(t,"d5d80FONi9B17H7o4DSCxNT","backgroundLoop");var i=e("initConfig").player;cc.Class({extends:cc.Component,properties:{bg1:{default:null,type:cc.Prefab},bg2:{default:null,type:cc.Prefab},bg3:{default:null,type:cc.Prefab}},onLoad:function(){this.newBg(),cc.find("Canvas").getChildByName("bg").active=!1},newBg:function(){var e=cc.instantiate(this["bg"+i.bg]);this.node.addChild(e)}}),cc._RF.pop()},{initConfig:"initConfig"}],claw:[function(e,t,n){"use strict";cc._RF.push(t,"503dcI9SUZJM72Pu6LjLZ9S","claw");var i=e("Config"),o=i.obj,c=i.player;cc.Class({extends:cc.Component,properties:{isRotating:!0,rotateSpeed:75,claw1:{default:null,type:cc.Node},claw0:{default:null,type:cc.Node},prop:{default:null,type:cc.Node},rope:{default:null,type:cc.Node},hasDugUp:!1,obj:{default:null,type:cc.Node},score:{default:null,type:cc.Node},player:{default:null,type:cc.Node},digSound:{default:null,type:cc.AudioClip},pullSound:{default:null,type:cc.AudioClip},highValueSound:{default:null,type:cc.AudioClip},lowValueSound:{default:null,type:cc.AudioClip},normalValueSound:{default:null,type:cc.AudioClip}},rotateHook:function(e){this.isRotating&&(this.rope.angle>=75?this.rotateSpeed=-this.rotateSpeed:this.rope.angle<=-75&&(this.rotateSpeed=Math.abs(this.rotateSpeed)),this.rope.angle+=this.rotateSpeed*e)},setStopAction:function(){this.isRotating=!1;var e=Math.cos(Math.PI/180*this.rope.angle),t=320/Math.abs(e);this.len=t,this.dh=t/75,cc.audioEngine.playEffect(this.pullSound,!1)},delayAction:function(){var e=this,t=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e.prop.removeAllChildren(),e.clawClose(),cc.systemEvent.emit("updateGold")}));this.node.runAction(t)},onKeyDown:function(e){if(!(this.len>0))switch(e.keyCode){case cc.macro.KEY.space:this.setStopAction()}},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.space:}},clawOpen:function(){var e=cc.rotateTo(.2,0),t=cc.rotateTo(.2,0);this.claw0.runAction(e),this.claw1.runAction(t)},clawClose:function(){var e=cc.rotateTo(.1,-3),t=cc.rotateTo(.1,3);this.claw0.runAction(e),this.claw1.runAction(t)},clawOrderChange:function(){this.rope.angle<=0?(this.claw1.setSiblingIndex(1),this.prop.setSiblingIndex(2),this.claw0.setSiblingIndex(3)):(this.claw0.setSiblingIndex(1),this.prop.setSiblingIndex(2),this.claw1.setSiblingIndex(3))},onCollisionEnter:function(e){console.log("other.tag",e.tag,e.node.name),c.preMoney=o["tag"+e.tag].money,"wall"==e.node.group?(this.dh=-this.len/150,cc.director.getCollisionManager().enabled=!1):0==this.prop.childrenCount&&(e.node.x=0,e.node.y=-5-e.node.height/2*e.node.scaleY,this.clawOpen(),this.clawOrderChange(),e.node.parent=this.prop,"stone"==e.node.group?(this.dh=-this.len/450,cc.audioEngine.playEffect(this.lowValueSound,!1)):"gold"==e.node.group&&(this.dh=-this.len/150/e.node.scaleY,c.preMoney>=250?cc.audioEngine.playEffect(this.highValueSound,!1):cc.audioEngine.playEffect(this.normalValueSound,!1)))},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.len=0,this.dh=0,this.score.opacity=0},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},getScore:function(){var e=this.score;e.opacity=255,e.getComponent(cc.Label).string="$"+c.preMoney;var t=this.node.getParent().getParent().x;e.setPosition(t-30,this.node.y+110);var n=cc.fadeOut(2);e.runAction(n)},update:function(e){this.rotateHook(e),this.len>0&&(this.rope.height+=this.dh,this.node.y=-this.rope.height,this.rope.height<=0&&(this.len=0,this.rope.height=1,this.node.y=0,this.isRotating=!0,this.delayAction(),cc.director.getCollisionManager().enabled=!0,0!==this.prop.childrenCount&&this.getScore()))}}),cc._RF.pop()},{Config:"Config"}],"falling-stone":[function(e,t,n){"use strict";cc._RF.push(t,"9a390c5T55Plp3s9Gt70ect","falling-stone");var i=e("Config"),o=i.player,c=i.fallingStone0;cc.Class({extends:cc.Component,properties:{fallingStonePrefab:cc.Prefab},onLoad:function(){this.f=0,this.b=Object.keys(c).length,this.generateNewFs()},generateNewFs:function(){var e=this,t=this.fs(c);if(!(this.f>this.b)){o.level>3&&(t=this.shuffle(t),cc.log(t[0]));var n=t[this.f];for(var i in n){var a,s;a=n[i],(s=cc.instantiate(this.fallingStonePrefab)).parent=this.node,s.x=a,s.y=700;var l=s.getComponent(cc.Animation);l.play("fallingStone0"),o.level>2&&(l.speed=2.5),l.on("finished",this.callback,this)}this.schedule(function(){e.f+=1,e.generateNewFs()},1,0,6)}},callback:function(){this.node.removeAllChildren()},update:function(e){},fs:function(){var e,t,n=[];for(t=1;t<11;t++)e=c["tag"+t],n.push(e);return n},shuffle:function(e){for(t in e)for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[n];e[n]=e[t],e[t]=i}return e}}),cc._RF.pop()},{Config:"Config"}],"game-panel":[function(e,t,n){"use strict";cc._RF.push(t,"8fd11buVf5Prp3O25SiiYfo","game-panel");var i=e("initConfig").player,o=e("uiMgr");cc.Class({extends:cc.Component,properties:{goal:{default:null,type:cc.Node},money:{default:null,type:cc.Node},level:{default:null,type:cc.Node},claw:{default:null,type:cc.Node},guideChar0:{default:null,type:cc.Node},guideChar1:{default:null,type:cc.Node},guide:{default:null,type:cc.Node},guideOver:!1,isCheckbox:{default:!1,notify:function(){this.refresh()}},isChecked:{default:!0,notify:function(){}},soundOnBtn:{default:null,type:cc.Node},gamePause1:{default:null,type:cc.Node},gamePause0:{default:null,type:cc.Node}},onLoad:function(){this.setLevel(),this.setGoal(),i.money=0,cc.systemEvent.on("updateGold",this.addMoney,this),this.guide.opacity=0,this.guideChar0.opacity=0,this.guideChar1.opacity=0,this.guideForPlayer(),this.c=!0},onDisable:function(){cc.systemEvent.off("updateGold",this.addMoney,this)},setLevel:function(){this.level.getComponent(cc.Label).string=i.level},setGoal:function(){this.goal.getComponent(cc.Label).string=i.getProp()},addMoney:function(){var e=i.money+i.preMoney;if(i.money=e,this.money.getComponent(cc.Label).string=e,+this.money.getComponent(cc.Label).string>=+this.goal.getComponent(cc.Label).string){var t=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){o.close("prefab/ui/game-panel"),o.open("prefab/ui/result-panel"),o.open("prefab/result-bg"),cc.audioEngine.stopAll()}));this.node.runAction(t),this.claw.stopAllActions(),this.claw.getComponent("claw").isRotating=!1}},guideForPlayer:function(){var e=this;if(isStarted){this.guide.opacity=255;var t=this.guideChar0;t.opacity=255;var n=cc.fadeOut(1.5);t.runAction(n);var i=this.guideChar1,o=cc.sequence(cc.delayTime(1.7),cc.callFunc(function(){i.opacity=255}),cc.fadeOut(1.5),cc.callFunc(function(){e.guide.opacity=0}));i.runAction(o),isStarted=!1}},update:function(e){},onClick1:function(){this.c?(cc.director.pause(),this.gamePause0.active=!0,this.c=!1):(cc.director.resume(),this.c=!0)}}),cc._RF.pop()},{initConfig:"initConfig",uiMgr:"uiMgr"}],"home-panel":[function(e,t,n){"use strict";cc._RF.push(t,"cb2efNVqTJC7Zqgp9raQgBb","home-panel");var i=e("uiMgr");cc.Class({extends:cc.Component,properties:{menuAudio:{default:null,type:cc.AudioClip},startBtnAudio:{default:null,type:cc.AudioClip},isCheckbox:{default:!1,notify:function(){this.refresh()}},isChecked:{default:!0,notify:function(){}},soundOnBtn:{default:null,type:cc.Node},soundOffBtn:{default:null,type:cc.Node},cloud:{default:null,type:cc.Node},cloudDelayTime:60},onLoad:function(){console.log("======111",cc.audioEngine.playEffect(this.menuAudio,!0)),this.cloudMoveAction()},check:function(){this.isChecked=!0,this.refresh()},uncheck:function(){this.isChecked=!1,this.refresh()},refresh:function(){this.isCheckbox?(this.soundOnBtn.active=this.isChecked,this.soundOffBtn.active=!this.isChecked):(this.soundOnBtn.active=this.isChecked,this.soundOffBtn.active=!this.isChecked,this.isSound()),this.isChecked=!this.isChecked},isSound:function(){this.isChecked?cc.audioEngine.pauseAll():cc.audioEngine.resumeAll()},start:function(){},onClicked:function(){i.open("prefab/ui/loading-panel"),i.close("prefab/ui/home-panel"),cc.audioEngine.stopAll()},cloudMoveAction:function(){var e=cc.repeatForever(cc.sequence(cc.moveBy(this.cloudDelayTime,1500,0),cc.moveBy(0,-1500,0)));this.cloud.runAction(e)},update:function(e){}}),cc._RF.pop()},{uiMgr:"uiMgr"}],initConfig:[function(e,t,n){"use strict";cc._RF.push(t,"d5d18IE7opJKrJYYnVbG32R","initConfig");var i=e("Config"),o=i.player,c=i.level;t.exports={player:o,getObj:function(){return c["level"+o.level].obj}},cc._RF.pop()},{Config:"Config"}],"loading-panel ":[function(e,t,n){"use strict";cc._RF.push(t,"de812E8iI1H9budjLixjRmT","loading-panel ");var i=e("uiMgr");window.isStarted=!1,cc.Class({extends:cc.Component,properties:{miner:{default:null,type:cc.Node},playSound:{default:null,type:cc.AudioClip}},onLoad:function(){this.animation1=this.node.getChildByName("loading-anim").getComponent(cc.Animation),this.animation1.play("loading"),this.animation1.on("finished",this.callback,this),this.animation2=this.node.getChildByName("miner-normal").getComponent(cc.Animation),this.animation2.play("loading-miner"),isStarted=!0},callback:function(){i.open("prefab/ui/game-panel"),i.close("prefab/ui/loading-panel"),cc.audioEngine.playEffect(this.playSound,!0)},start:function(){}}),cc._RF.pop()},{uiMgr:"uiMgr"}],obj:[function(e,t,n){"use strict";cc._RF.push(t,"cc02402sX9PR6nY2oSgfdfu","obj");var i=e("initConfig");cc.Class({extends:cc.Component,properties:{gold1:{default:null,type:cc.Prefab},gold2:{default:null,type:cc.Prefab},gold3:{default:null,type:cc.Prefab},gold4:{default:null,type:cc.Prefab},stone1:{default:null,type:cc.Prefab},stone2:{default:null,type:cc.Prefab}},spawnNewObj:function(){this.node.removeAllChildren();for(var e,t,n=i.getObj(),o=0;o<n.length;o++)e=n[o],(t=cc.instantiate(this[e.name])).parent=this.node,t.setPosition(e.x,e.y)},onLoad:function(){this.spawnNewObj()}}),cc._RF.pop()},{initConfig:"initConfig"}],prop:[function(e,t,n){"use strict";cc._RF.push(t,"30a24cRIoNNsbpHcsKgLpyg","prop"),cc.Class({extends:cc.Component,properties:{goldList:[],goldPrefab:[cc.Prefab],stonePrefab:cc.Prefab,propController:{default:null,type:cc.Node},hasDugup:!1},generateNewGold:function(){var e=3*Math.random();e=Math.floor(e);var t=cc.instantiate(this.goldPrefab[e]);t.scale=Math.random()+.1;var n=this.node.width/2-37.5;t.x=2*(Math.random()-.5)*n,t.y=335*Math.random(),this.goldList.push(t),hasDugUp?this.propController.node.addChild(t):this.node.addChild(t)},getNewGoldPos:function(){this.generateNewGold()},spawnNewstone:function(){var e=cc.instantiate(this.stonePrefab);return this.node.addChild(e),e.x=this.node.width/2,e.y=335*Math.random,cc.v2(e.x,e.y)},obtainNewStonePos:function(){this.spawnNewstone()},digUpProps:function(){this.goldTemp.node.setParent(this.propController)},start:function(){},update:function(e){}}),cc._RF.pop()},{}],"result-panel":[function(e,t,n){"use strict";cc._RF.push(t,"c42f4Umj4tGboh2oNA+JlVy","result-panel");var i=e("uiMgr"),o=e("initConfig").player;window.isFailed=!1,cc.Class({extends:cc.Component,properties:{success:{default:null,type:cc.Node},BtnNext:{default:null,type:cc.Node},failed:{default:null,type:cc.Node},BtnAudio:{default:null,type:cc.AudioClip},playSound:{default:null,type:cc.AudioClip}},onLoad:function(){isFailed?(this.failed.active=!0,isFailed=!1):this.success.active=!0},GoNextBtn:function(){var e=cc.fadeIn(1);this.BtnNext.runAction(e)},onClickReturn:function(){cc.director.loadScene("Main"),o.level=1,o.bg=1,cc.audioEngine.stopAll()},onClickNext:function(){o.isSucceed&&(cc.audioEngine.playEffect(this.BtnAudio,!1),cc.audioEngine.playEffect(this.playSound,!0),o.level+=1,o.bg>2?o.bg-=1:o.bg+=1,i.close("prefab/result-bg"),i.close("prefab/ui/result-panel"),i.open("prefab/ui/game-panel"))},onClickPlayAgain:function(){i.open("prefab/ui/game-panel"),i.close("prefab/ui/result-panel"),cc.audioEngine.playEffect(this.playSound,!0)}}),cc._RF.pop()},{initConfig:"initConfig",uiMgr:"uiMgr"}],uiMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ba003ss6bBCE4h30In6/xgX","uiMgr");var i=cc.Class({statics:{uiList:[],open:function(e){cc.loader.loadRes(e,cc.Prefab,function(t,n){if(t)return console.log("err: ",t);var o=cc.instantiate(n);o.position=cc.v2(),o.parent=cc.find("Canvas"),i.uiList[e]=o})},close:function(e){var t=i.uiList[e];t&&(t.parent=null)}}});t.export=i,cc._RF.pop()},{}],use_reversed_rotateTo:[function(e,t,n){"use strict";cc._RF.push(t,"07736bNxNFCxIsNztPcoR/F","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["Config","initConfig","uiMgr","000 - 001","Main","Miner","backgroundLoop","claw","falling-stone","obj","prop","use_reversed_rotateTo","game-panel","home-panel","loading-panel ","result-panel"]);